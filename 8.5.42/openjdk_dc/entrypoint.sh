#!/usr/bin/dumb-init /bin/bash

uid=${PAAS_UID:-1000}

# check if a old paas user exists and delete it
cat /etc/passwd | grep paas
if [ $? -eq 0 ]; then
    deluser paas
fi

# (re)add the paas
adduser -D -g '' -u ${uid} -h /home/paas paas

#chown home and data folder
chown -R paas:paas /app
chown -R paas:paas /opt/data


cat>>/etc/hosts<<EOF
dcdn001 133.37.83.44
dcdn002 133.37.83.45
dcdn003 133.37.83.46
dcdn004 133.37.83.47
dcdn005 133.37.83.48
dcdn006 133.37.83.49
dcdn007 133.37.83.50
dcdn008 133.37.83.51
dcdn009 133.37.83.52
dcdn010 133.37.83.53
dcdn011 133.37.83.54
dcdn012 133.37.83.55
dcdn013 133.37.83.94
dcdn014 133.37.83.95
dcdn015 133.37.83.96
dcdn016 133.37.83.97
dcdn017 133.37.83.98
dcdn018 133.37.83.99
dcdn019 133.37.83.100
dcdn020 133.37.83.101
dcdn021 133.37.83.102
dcdn022 133.37.83.103
dcdn023 133.37.83.104
dcdn024 133.37.83.105
dcdn025 133.37.83.110
dcdn026 133.37.83.111
dcdn027 133.37.83.112
dcdn028 133.37.83.113
dcdn029 133.37.83.114
dcdn030 133.37.83.115
dcdn031 133.37.83.116
dcdn032 133.37.83.119
dcdn033 133.37.83.120
dcdn034 133.37.83.121
dcdn035 133.37.83.122
dcdn036 133.37.83.123
dcdn037 133.37.83.124
dcdn038 133.37.83.125
dcdn039 133.37.83.126
dcdn040 133.37.83.127
dcdn041 133.37.83.128
dcdn042 133.37.83.129
dcdn043 133.37.83.130
dcdn044 133.37.83.131
dcdn045 133.37.83.132
dcdn046 133.37.83.133
dcdn047 133.37.83.134
dcdn048 133.37.83.56
dcdn049 133.37.83.57
dcdn050 133.37.83.58
dcdn051 133.37.83.59
dcdn052 133.37.83.60
dcdn053 133.37.83.61
dcdn054 133.37.83.62
dcdn055 133.37.83.63
dcdn056 133.37.83.64
dcdn057 133.37.83.65
dcdn058 133.37.83.66
dcdn059 133.37.83.67
dcdn060 133.37.83.68
dcdn061 133.37.83.69
dcdn062 133.37.83.70
dcdn063 133.37.83.71
dcdn064 133.37.83.72
dcdn065 133.37.83.73
dcdn066 133.37.83.74
dcdn067 133.37.83.75
dcdn068 133.37.83.76
dcdn069 133.37.83.77
dcdn070 133.37.83.78
dcdn071 133.37.83.79
dcdn072 133.37.83.80
dcdn073 133.37.83.81
dcdn074 133.37.83.82
dcdn075 133.37.83.83
dcdn076 133.37.83.84
dcdn077 133.37.83.85
dcdn078 133.37.83.86
dcdn079 133.37.83.87
dcdn080 133.37.83.88
dcdn081 133.37.83.89
dchv1 133.37.83.155
dckdc2 133.37.83.157
dckfa01 133.37.83.135
dckfa02 133.37.83.136
dckfa03 133.37.83.137
dckfa04 133.37.83.138
dckfa05 133.37.83.139
dcnn1 133.37.83.144
dcnn2 133.37.83.145
dcrg1 133.37.83.146
fintf1 133.37.83.27
fintf3 133.37.83.29
fintf4 133.37.83.30
fintf5 133.38.39.247
fintf6 133.38.39.248
rintf1 133.38.39.246
scdcam1 133.38.39.225
scdchv1 133.38.39.223
scdckb1 133.38.39.224
scdcnn1 133.38.39.220
scdcnn2 133.38.39.221
scdcrg1 133.38.39.222
scdn001 133.38.39.31
scdn002 133.38.39.32
scdn003 133.38.39.33
scdn004 133.38.39.34
scdn005 133.38.39.35
scdn006 133.38.39.36
scdn007 133.38.39.37
scdn008 133.38.39.38
scdn009 133.38.39.39
scdn010 133.38.39.40
scdn011 133.38.39.41
scdn012 133.38.39.42
scdn013 133.38.39.43
scdn014 133.38.39.44
scdn015 133.38.39.45
scdn016 133.38.39.46
scdn017 133.38.39.47
scdn018 133.38.39.48
scdn019 133.38.39.49
scdn020 133.38.39.50
scdn021 133.38.39.51
scdn022 133.38.39.52
scdn023 133.38.39.53
scdn024 133.38.39.54
scdn025 133.38.39.55
scdn026 133.38.39.56
scdn027 133.38.39.57
scdn028 133.38.39.58
scdn029 133.38.39.59
scdn030 133.38.39.60
scdn031 133.38.39.61
scdn032 133.38.39.62
scdn033 133.38.39.63
scdn034 133.38.39.64
scdn035 133.38.39.65
scdn036 133.38.39.66
scdn037 133.38.39.67
scdn038 133.38.39.68
scdn039 133.38.39.69
scdn040 133.38.39.70
scdn041 133.38.39.71
scdn042 133.38.39.72
scdn043 133.38.39.73
scdn044 133.38.39.74
scdn045 133.38.39.75
scdn046 133.38.39.76
scdn047 133.38.39.77
scdn048 133.38.39.78
scdn049 133.38.39.79
scdn050 133.38.39.80
scdn051 133.38.39.81
scdn052 133.38.39.82
scdn053 133.38.39.83
scdn054 133.38.39.84
scdn055 133.38.39.85
scdn056 133.38.39.86
scdn057 133.38.39.87
scdn058 133.38.39.88
scdn059 133.38.39.89
scdn060 133.38.39.90
scdn061 133.38.39.91
scdn062 133.38.39.92
scdn063 133.38.39.93
scdn064 133.38.39.94
scdn065 133.38.39.95
scdn066 133.38.39.96
scdn067 133.38.39.97
scdn068 133.38.39.98
scdn069 133.38.39.99
scdn070 133.38.39.100
scdn071 133.38.39.101
scdn072 133.38.39.102
scdn073 133.38.39.103
scdn074 133.38.39.104
scdn075 133.38.39.105
scdn076 133.38.39.106
scdn077 133.38.39.107
scdn078 133.38.39.108
scdn079 133.38.39.109
scdn080 133.38.39.110
scdn081 133.38.39.111
scdn082 133.38.39.112
scdn083 133.38.39.113
scdn084 133.38.39.114
scdn085 133.38.39.115
scdn086 133.38.39.116
scdn087 133.38.39.117
scdn088 133.38.39.118
scdn089 133.38.39.119
scdn090 133.38.39.120
scdn091 133.38.39.141
scdn092 133.38.39.142
scdn093 133.38.39.143
scdn094 133.38.39.144
scdn095 133.38.39.145
scdn096 133.38.39.146
scdn097 133.38.39.147
scdn098 133.38.39.148
scdn099 133.38.39.149
scdn100 133.38.39.150
scdn101 133.38.39.151
scdn102 133.38.39.152
scdn103 133.38.39.153
scdn104 133.38.39.154
scdn105 133.38.39.155
scdn106 133.38.39.156
scdn107 133.38.39.157
scdn108 133.38.39.158
scdn109 133.38.39.159
scdn110 133.38.39.160
scdn111 133.38.39.161
scdn112 133.38.39.162
scdn113 133.38.39.163
scdn114 133.38.39.164
scdn115 133.38.39.165
scdn116 133.38.39.166
scdn117 133.38.39.167
scdn118 133.38.39.168
scdn119 133.38.39.169
scdn120 133.38.39.170
scdn121 133.38.39.171
scdn122 133.38.39.172
scdn123 133.38.39.173
scdn124 133.38.39.174
scdn125 133.38.39.175
scdn126 133.38.39.176
scdn127 133.38.39.179
scdn128 133.38.39.180
scdn129 133.38.39.181
scdn130 133.38.39.182
scdn131 133.38.39.183
scdn132 133.38.39.184
scdn133 133.38.39.185
scdn134 133.38.39.186
scdn135 133.38.39.187
scdn136 133.38.39.188
scdn137 133.38.39.189
scdn138 133.38.39.190
scdn139 133.38.39.191
scdn140 133.38.39.192
scdn141 133.38.39.193
scdn142 133.38.39.194
scdn143 133.38.39.195
scdn144 133.38.39.196
scdn145 133.38.39.198
scdn146 133.38.39.199
scdn147 133.38.39.200
scdn148 133.38.39.201
scdn149 133.38.39.202
scdn150 133.38.39.203
scdn151 133.38.39.204
scdn152 133.38.39.205
scdn153 133.38.39.206
scdn154 133.38.39.207
scdn155 133.37.83.218
scdn156 133.37.83.219
scdn157 133.37.83.220
scdn158 133.37.83.221
scdn159 133.37.83.222
scdn160 133.37.83.223
scdn161 133.37.83.224
scdn162 133.37.83.225
scdn163 133.37.83.226
scdn164 133.37.83.227
scdn165 133.37.83.228
scdn166 133.37.83.229
scdn167 133.37.83.230
scdn168 133.37.83.231
scdn169 133.37.83.232
scdn170 133.38.40.30
scdn171 133.38.40.31
scdn172 133.38.40.32
scdn173 133.38.40.33
scdn174 133.38.40.34
scdn175 133.38.40.35
scdn176 133.38.40.36
scdn177 133.38.40.37
scdn178 133.38.40.38
scdn179 133.38.40.39
scdn180 133.38.40.40
scdn181 133.38.40.41
scdn182 133.38.40.42
scdn183 133.38.40.43
scdn184 133.38.40.44
scdn185 133.38.40.45
scdn186 133.38.40.46
scdn187 133.38.40.47
scdn188 133.38.40.48
scdn189 133.38.40.49
scdn190 133.38.40.50
scdn191 133.38.40.51
scdn192 133.38.40.52
scdn193 133.38.40.53
scdn194 133.38.40.54
scdn195 133.38.40.55
scdn196 133.38.40.56
scdn197 133.38.40.57
scdn198 133.38.40.58
scdn199 133.38.40.59
scdn200 133.38.40.60
scdn201 133.38.40.61
scdn202 133.38.40.62
scdn203 133.38.40.65
scdn204 133.38.40.66
scdn205 133.38.40.67
scdn206 133.38.40.68
scdn207 133.38.40.69
scdn208 133.38.40.70
scdn209 133.38.40.71
scdn210 133.38.40.72
scdn211 133.38.40.73
scdn212 133.38.40.76
scdn213 133.38.40.78
scdn214 133.38.40.79
scdn215 133.38.40.80
scdn216 133.38.40.81
scdn217 133.38.40.82
scdn218 133.38.40.83
scdn219 133.38.40.84
scdn220 133.38.39.16
scdn221 133.38.39.17
scdn222 133.38.39.18
scdn223 133.38.39.19
scdn224 133.38.39.20
scdn225 133.38.39.21
scdn226 133.38.39.22
scdn227 133.38.39.23
scdn228 133.38.39.24
scdn229 133.38.39.25
scdn230 133.38.39.26
scdn231 133.38.39.27
scdn232 133.38.39.28
scdn233 133.38.39.29
scdn234 133.38.39.30
scdn235 133.38.39.231
scdn236 133.38.39.232
scdn237 133.38.39.233
scdn238 133.38.39.234
scdn239 133.38.39.235
scdn240 133.38.39.236
scdn241 133.38.39.237
scdn242 133.38.39.238
scdn243 133.38.39.239
scdn244 133.38.39.240
scdn245 133.38.39.241
scdn246 133.38.39.242
scdn247 133.38.39.243
scdn248 133.37.83.192
scdn249 133.37.83.193
scdn250 133.37.83.194
scdn251 133.37.83.195
scdn252 133.37.83.196
scdn253 133.37.83.197
scdn254 133.37.83.198
scdn255 133.37.83.199
scdn256 133.37.83.200
scdn257 133.37.83.201
scdn258 133.37.83.202
scdn259 133.37.83.203
scdn260 133.37.83.204
scdn261 133.37.83.205
scdn262 133.37.83.206
scdn263 133.37.83.207
scdn264 133.37.83.208
scdn265 133.37.83.209
scdn266 133.37.83.210
scdn267 133.37.83.211
scdn268 133.37.83.212
scdn269 133.37.83.213
scdn270 133.37.83.214
scdn271 133.37.83.215
scdn272 133.37.83.216
scdn273 133.37.83.90
scdn274 133.37.83.91
scdn275 133.37.83.92
scdn276 133.37.83.93
scdn277 133.37.83.176
scdn278 133.37.83.177
scdn279 133.37.83.178
scdn280 133.37.83.179
scdn281 133.37.83.180
scdn282 133.37.83.181
scdn283 133.37.83.182
scdn284 133.37.83.183
scdn285 133.37.83.184
scdn286 133.37.83.185
scdn287 133.37.83.186
scdn288 133.37.83.187
scdn289 133.37.83.188
scdn290 133.37.83.189
scdn291 133.37.83.190
scdn292 133.37.83.191
sces001 133.38.39.215
sces002 133.38.39.216
sces003 133.38.39.217
sces004 133.38.39.218
sces005 133.38.39.219
sces006 133.38.39.226
sces007 133.38.39.227
sces008 133.38.39.228
sces009 133.38.39.229
sces010 133.38.39.230
scfida1 133.38.39.177
scfida2 133.38.39.178
scfinf1 133.38.39.208
scfinf2 133.38.39.209
scfinf3 133.38.39.210
scfinf4 133.38.39.211
scfinf5 133.38.39.212
scfinf6 133.38.39.213
scfinf7 133.38.39.214
scyw001 133.38.39.197
EOF


exec su-exec paas "$@"
